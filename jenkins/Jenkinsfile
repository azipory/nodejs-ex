node('nodejs') {
  stage 'init'
    openshift.withCluster() { // Use "default" cluster or fallback to OpenShift cluster detection
      echo "Hello from the project running Jenkins: ${openshift.project()}"
    }   
  stage 'build'
    openshiftBuild(buildConfig: 'nodejs-ex', showBuildLogs: 'true')

  stage 'tag'
    openshiftTag(namespace: ${openshift.project()}, sourceStream: 'nodejs-example', sourceTag: 'latest', destinationNamespace: ${openshift.project()}, destinationStream: 'nodejs-example', destinationTag: 'latest')

  stage 'deploy'
    openshiftDeploy(deploymentConfig: 'nodejs-example', namespace: ${openshift.project()})

}
